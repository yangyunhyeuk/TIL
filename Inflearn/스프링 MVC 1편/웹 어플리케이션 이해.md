- 데이터를 전송하는 경우 모든 것이 HTTP 기반으로 전송된다.
- 서버 간의 통신에서도 HTTP 기반으로 수행된다.

---

### 웹 서버 (Web Server)

- HTTP 기반으로 동작
- 정적 리소스 제공, 기타 부가기능
- 정적 HTML 파일, JS, CSS, 이미지, 영상
- EX) NGINX, APACHE

### 웹 어플리케이션 서버 (Web Application Server)

- HTTP 기반으로 동작
- 웹 서버 기능 포함 + 정적 리소스 제공 기능
- 프로그램 코드를 실행해서 애플리케이션 로직을 수행한다.
    - 동적 HTML , HTTP API(JSON)
    - 서블릿, JSP, 스프링 MVC
- EX) 톰캣, Jetty

---

웹서버는 정적 리소스를 다루며, WAS는 애플리케이션 로직을 수행한다. 

사실 둘의 용어 경계도 모호하다. 

- 웹 서버도 프로그램 실행 기능을 포함하기도 하며 WAS도 웹 서버의 기능을 제공하기도 함

자바는 서블릿 컨테이너 기능을 제공하면 WAS이다. 

WAS는 애플리케이션 코드를 실행하는 데에 더 특화되어있다. 

- 최소한의 웹 시스템 구성 (WAS, DB)
    - WAS는 정적 리소스, 애플리케이션 로직 모두 제공이 가능하기에 
    WAS, DB만으로 시스템 구성이 가능하다.
    - 허나 WAS가 너무 많은 역할을 담당하면 서버 과부하 우려가 있다.
        - WAS 장애 시 오류 화면 노출 불가능
        
- 적절한 웹 시스템 구성 (WEB, WAS, DB)
    - 정적 리소스(HTML, CSS, JS, IMG)를 웹 서버가 처리함으로써 WAS의 부하를 덜어준다.
    - 웹서버는 애플리케이션 로직같은 동적인 처리를 WAS에 일임한다.
    - 이로써 WAS는 중요한 애플리케이션 로직 처리를 전담한다.
    

---

### 서블릿

- 비즈니스 로직을 제외한 모든 일(TCP/IP 연결, 요청 파싱, 응답 메시지 생성 등을 자동화)을 지원해준다.
- HTTP 요청, 응답 정보를 편리하게 사용할 수 있는 HttpServletRequest, HttpServletResponse를 통해 http 스펙을 매우 편리하게 사용 가능

- HTTP 요청 시
    - WAS는 Request, Response 객체를 새로 만들어서 서블릿 객체를 호출한다.
    - 개발자는 http 요청, 응답 정보를 편리하게 사용
    - WAS는 Response 객체에 담겨있는 내용으로 HTTP 응답 정보 생성
    

### 서블릿 컨테이너

- WAS 내에 서블릿 컨테이너가 존재
- 서블릿 객체를 자동으로 생성해주고 호출, 종료해주어 생명주기를 관리해준다.
- 서블릿 객체는 싱글톤으로 관리된다.
- JSP도 서블릿으로 변환되어서 사용

---

### 쓰레드

- 애플리케이션 코드를 하나하나 순차적으로 실행하는 것을 의미한다.
- 자바 메인 메서드를 처음 실행하면 main이라는 이름의 쓰레드가 실행된다.
- 쓰레드가 없으면 자바 어플리케이션 실행이 불가능하다.

### 쓰레드 풀

- 필요한 쓰레드를 쓰레드 풀에 보관하고 관리한다.
- 쓰레드 풀에 생성 가능한 쓰레드의 최대치를 관리한다. 톰캣은 최대 200개 기본 설정 (변경 가능)
- 쓰레드 필요 시 생성되어 있는 쓰레드를 쓰레드 풀에서 꺼내 사용한다.
- 사용 종료 시 쓰레드 풀에 해당 쓰레드를 반납한다.

- WAS의 주요 튜닝 포인트는 최대 쓰레드 수이다.
- 최대 쓰레드 수를 너무 낮게 설정하면?
    - 동시 요청이 많으면 서버 리소스는 여유로우나, 클라이언트는 금방 응답 지연
- 최대 쓰레드 수를 너무 높게 설정하면?
    - CPU, 메모리 소스 임계점 초과로 서버가 다운된다.

- WAS의 멀티쓰레드 지원
    - 멀티쓰레드에 대한 부분은  WAS가 처리한다.
    - 개발자가 멀티쓰레드 관련 로직을 짜기에는 공부할 것이 너무 많아, 개발자는 이 부분에 대해 신경쓰지 않아도 됨
    - WAS는 멀티 쓰레드 환경이므로 싱글톤 객체(서블릿, 스프링 빈)는 주의해서 사용해야 한다.
    

---

### 정적 리소스

- 고정된 HTML 파일, CSS, JS, 이미지, 영상 등을 제공하며 주로 웹 브라우져에서 요청

### HTML 페이지

- 요청 기반으로 동적으로 필요한 HTML 파일을 생성해서 전달한다.

### HTTP API

- HTML이 아니라 데이터를 전달
- 주로 JSON 형식을 사용한다.

### 서버 사이드 렌더링 (SSR)

- 서버에서 최종 HTML을 생성하여 클라이언트에 전달
- 주로 정적인 화면에 사용
- 관련 기술 : JSP, 타임리프

### 클라이언트 사이드 렌더링 (CSR)

- HTML 결과로 JS를 사용해 웹 브라우저에서 동적으로 생성해서 적용
- 주로 동적인 화면에서 사용, 웹 환경을 마치 앱처럼 필요한 부분부분 변경할 수 있다.
- ex) 구글맵, gmail, 구글 캘린더
