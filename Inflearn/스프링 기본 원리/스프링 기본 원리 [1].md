AppConfig는 애플리케이션의 전체 동작 방식을 구성하기 위해 
구현 객체를 생성하고, 연결하는 책임을 맡는다. 

이리하여 클라이언트 객체는 자신의 역할을 실행하는 것만 집중하면 되고 권한이 줄어들었으나, 책임이 명확해졌다. 

- 구성 정보에서 역할과 구현을 명확하게 분리
- 역할이 잘 드러남
- 중복 제거

할인 정책에 있어 정액 할인 정책, 정률 할인 정책 변경에 있어 
appconfig만 있는 구성 영역만 건드리면 수정이 가능하게 되었다. 

- SRP 단일 책임 원칙
    - 한 클래스는 하나의 책임만 가져야 한다.

- DIP 의존 관계 역전 원칙
    - 프로그래머는 추상화에 의존해야지, 구체화에 의존하면 안된다.
    - 의존성 주입은 이 원칙을 따르는 방법 중 하나다.
    - appconfig가 객체 인스턴스를 생성하여 클라이언트 코드에 의존 관계를 주입하여 문제를 해결하였다.
    
- OCP
    - 소프트웨어 요소는 확장에는 열려 있으나, 변경에는 닫혀 있어야 한다.
    
    ### 1. 제어의 역전(Inversion of Control)
    내가 호출하는 게 아니라 프레임 워크가 대신 호출해주는 것이다.
    
    - AppConfig를 통해 구현 객체(Impl)는 자신의 로직을 실행하는 역할만 담당한다.
    - 이렇듯 프로그램의 제어 흐름을 직접 제어하는 것이 아니라 외부에서 관리하는 것을 제어의 역전이라고 한다.

- 프레임워크가 내가 작성한 코드를 제어하고 대신 실행한다면 그것은 프레임워크가 맞다.
- 반면에 내가 작성한 코드가 직접 제어의 흐름을 담당한다면 그것은 프레임워크가 아닌 라이브러리이다.

### 2. 의존성 주입(Dependency Injection)
애플리케이션 실행 시점(런타임)에 외부에서 실제 구현 객체를 생성하고 클라이언트에 전달하여 클라이언트와 서버의 실제 의존 관계가 연결되는 것을 의미한다.

- 객체 인스턴스를 생성하고 그 참조값을 전달하여 연결되는 것이다.
- 의존관계 주입을 사용하면 정적인 클래스 의존관계를 변경하지 않고 동적인 객체 인스턴스 의존관계를 쉽게 변경할 수 있다.

### 3. IoC 컨테이너, DI 컨테이너
AppConfig처럼 객체를 생성하고 관리하면서 의존 관계를 연결해주는 것을 IoC 컨테이너 혹은 DI 컨테이너라고 한다.

### 4. 스프링 컨테이너
ApplicationContext를 스프링 컨테이너라고 한다.

- 기존의 개발자는 ‘AppConfig’를 사용해서 직접 객체를 생성하고 DI를 했지만 이제 스프링 컨테이너를 통해서 사용한다

![11](https://user-images.githubusercontent.com/56379649/167175476-666ed3fd-1c79-48fe-84aa-fd8096644407.png)

- 스프링 컨테이너는 “@Configuraion”을 통해 AppConfig를 설정 정보로 사용하며, @Bean이라 적힌 메서드를 모두 호출하여 반환된 객체를 스프링 컨테이너에 등록한다. 이렇게 스프링 컨테이너에 등록된 객체를 스프링 빈이라고 칭한다.

![12](https://user-images.githubusercontent.com/56379649/167175531-b3f9a894-8dd8-4d41-9acf-e3dba0eb5f27.png)

![13](https://user-images.githubusercontent.com/56379649/167175566-d79ba6bd-3e3e-4086-8c7d-c1c5aea96a16.png)


스프링은 빈를 생성하고 의존 관계를 주입하는 단계가 나뉘어져 있다. 

그런데 자바 코드로 스프링 빈을 등록하면 생성자를 호출하면서 의존 관계 주입도 한 번에 처리된다.
