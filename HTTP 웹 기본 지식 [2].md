
### *stateful*
-중간에 다른 점원으로 바뀌면 안된다(상태 유지) 이는 상태를 보관하고 있어 서버에 장애가 생기면 장애가 발생한다.

### *stateless*
-중간에 점원이 바뀌어도 된다(무상태) 이는 아무 서버나 호출해도 상태를 보관하지 않아 장애가 발생하지 않는다

### *http 헤더*
-http 전송에 필요한 모든 부가정보를 담고 있다. (메시지 바디 내용, 메시지 바디 크기, 압축, 인증, 요청 클라이언트 정보)

### *http 바디*
-실제 전송할 데이터를 담고 있으며 byte로 표현할 수 있는 html 문서, 이미지, 영상, json 등 모든 데이터 전송이 가능하다.



---



## http 정리

1. http 메시지에 모든 것을 전송한다. 
2. 단순하고 확장이 가능하다. 
3. 무상태 프로토콜

### get

1. 리소스 조회
2. 서버에 전달하고 싶은 데이터는 query(쿼리 파라미터, 쿼리 스트링)를 통해서 전달
3. 메시지 바디를 사용해서 데이터를 전달할 수 있지만 지원하지 않는 곳이 많아 비권장

### post

1. 새 리소스 생성(등록)
    1. 서버가 아직 식별하지 않은 새 리소스 생성
2. 요청 데이터 처리
    1. 단순히 데이터를 생성하거나 변경하는 것을 넘어 프로세스를 처리하는 경우
        1. 주문에서 결제완료 → 배달시작 → 배달완료 처럼 단순히 값 변경을 넘어 프로세스 상태가 변하는 경우
        2. POST의 결과로 새로운 리소스가 생성되지 않을 수도 있다.
3. 다른 메서드로 처리하기 애매한 경우
    1. JSON으로 조회 데이터를 넘겨야 하는데, GET 메서드를 사용하기 어려운 경우
    2. 애매하면 POST를 쓴다.

### put

1. 리소스를 대체
    1. 리소스가 있으면 대체, 기존의 것을 없애고 덮는 의미이다. 
    2. 없으면 새로 생성으로 갈아치운다는 특징이다.
    3. 쉽게 말해 덮어버린다는 얘기이다.
2. 클라이언트가 리소스를 식별
    1. 클라이언트가 리소스 위치를 알고 uri를 지정한다.
    2. 위의 특징이 post와의 차이점이다. 

### fetch

1. 리소스 부분 변경

### delete

1. 리소스 삭제

### http 메서드의 속성

1. 안전 : 호출해도 리소스가 변경되지 않는다. get외에 post, put, delete는 안전하지 않다.
    1. get를 계속 호출하여 로그가 쌓여서 장애가 발생하는 경우는 제외하고 해당 리소스만 취급
2. 멱등
    1. 한 번 호출하든 두 번 호출하든 결과가 똑같다. 
        1. get : 한 번 조회하든 두 번 조회하든 같은 결과다. 
        2. put : 같은 요청을 여러 번 해도 매번 갈아끼우니 결과는 같다. 
        3. delete : 같은 삭제 요청을 여러 번 해도 결과는 같다. 
        4. post의 경우 중복 데이터 발생 우려가 있어 멱등성에 해당하지 않는다. 
    2. 멱등은 중간에 요청이 들어와 데이터 변동이 발생하여 결과가 바뀌는 상황까지 고려하지 않는다. 
3. 캐시 가능
    1. 응답 결과 리소스를 캐시해서 사용해도 되는가
        1. get, head, post, patch 캐시 가능
        2. 실제로는 get, head 정도만 캐시로 사용한다. 

---

클라이언트에서 서버로 데이터 전송하는 경우

데이터 전달 방식은 크게 2가지이다. 

1. 쿼리 파라미터를 통한 데이터 전송
    1. get
    2. 검색어 정렬 필터가 그 예이다.
2. 메시지 바디를 통한 데이터 전송
    1. post, put, patch
    2. 회원가입, 상품 주문, 리소스 등록, 리소스 변경이 그 예이다. 

4가지의 상황

1. 정적 데이터 조회
    1. 이미지, 정적 텍스트 문서 : get으로 resource/path만 적어주면 된다.
2. 동적 데이터 조회
    1. 주로 검색, 게시판 목록에서 정렬 필터 : 동적으로 조회하기 위해 url path에 쿼리값도 같이 넘긴다.
3. html Form을 통한 데이터 전송
    1. 회원가입, 상품 주문, 데이터 변경 
4. http API를 통한 데이터 전송 
    1. 회원가입, 상품 주문, 데이터 변경 : form을 통한 통신이 아닌 그 외의 데이터 전송을 의미한다. 대표적인 예로 ajax가 있다. 
    2. 서버 to 서버, 앱 클라이언트, 웹 클라이언트(ajax)

---

  

HTML Form의 경우 get, post 방식만을 지원하기에 

추가적으로 컨트롤 uri라는 방법을 사용해야 한다. 

- get, post 방식만 지원하기에 제약이 발생한다.
- 해당 제약을 해결하기 위해 동사로 된 리소스 경로를 사용한다.
- post의 /new, /edit, /delete가 컨트롤 uri이다.
- 이는 http 메서드로 해결하기 애매할 때 사용한다.

---

4가지의 API 설계 개념

1. 문서(document) 
    - 단일 개념으로 파일 하나, 객체 인스턴스, 데이터베이스 row가 해당한다.
    - ex) /members/100, /files/star.jpg
2. 컬렉션(collection) 
    - 서버가 관리하는 리소스 디렉터리
    - 서버가 리소스의 URI를 생성하고 관리
    - ex) /members
3. 스토어(store)
    - 클라이언트가 관리하는 자원 저장소
    - 클라이언트가 리소스의 URI를 알고 관리한다.
    - ex) /files
4. 컨트롤러(Controller), 컨트롤 URI
    - 문서, 컬렉션, 스토어로 해결하기 어려운 추가 프로세스 실행
    - 동사를 직접 사용
    - ex) /members/{id}/delete
    

---
